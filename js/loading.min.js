let defaultOptions={message:"",fullscreen:true,size:"100px",font:"2rem",color:"var(--primary)",speed:"1s",id:"loading"};function startLoading(options=defaultOptions){options=populateMissingWithDefaultOptions(options);if($(".loading").length>0&&options.fullscreen)return $(".loading");const loading=$(`<div class="loading" id="${options.id}"><p class="message">${options.message}</p></div>`);if(options.fullscreen)loading.addClass("fullscreen");loading.prop({style:`--size: ${options.size}; --color: ${options.color}; --speed: ${options.speed}; --font: ${options.font}`});if(options.fullscreen)$("body").append(loading);return loading}function updateLoadingOptions(options){options=populateMissingWithDefaultOptions(options);const loading=$(`.loading#${options.id}`);loading.prop({style:`--size: ${options.size}; --color: ${options.color}; --speed: ${options.speed}; --font: ${options.font}`});loading.html(`<p class="message">${options.message}</p>`);if(options.fullscreen)loading.addClass("fullscreen");else loading.removeClass("fullscreen")}function startLoadingForDuration(options,duration,callback=null){startLoading(options);const originalMessage=options.message;const update=()=>{options.message=originalMessage.replace(/%duration%/g,duration.toString());updateLoadingOptions(options);if(duration<=0){clearInterval(interval);stopLoading();if(callback!==null)callback()}console.log(`Updating: ${duration}`)};update();const interval=setInterval(()=>{duration--;update()},1e3)}function populateMissingWithDefaultOptions(options){options.size=options.size||defaultOptions.size;options.color=options.color||defaultOptions.color;options.speed=options.speed||defaultOptions.speed;options.font=options.font||defaultOptions.font;options.message=options.message||defaultOptions.message;options.fullscreen=options.fullscreen??defaultOptions.fullscreen;return options}function stopLoading(id="loading"){$(`.loading#${id}`).remove()}export{startLoading,stopLoading,updateLoadingOptions,startLoadingForDuration};